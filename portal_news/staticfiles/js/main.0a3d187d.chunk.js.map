{"version":3,"sources":["globals.js","contexts/UserContext.js","components/singleComponents/LoginLink.js","components/utils/GetCookie.js","components/RoomList.js","components/utils/AlwaysScrollToBottom.js","components/Room.js","components/NotaPage.js","components/Comentario.js","components/Nota.js","components/NotaList.js","components/Nav.js","components/LoginForm.js","components/RegisterForm.js","components/HomePage.js","reportWebVitals.js","components/App.js"],"names":["host","window","location","protocol","UserContext","createContext","UserProvider","props","useState","localStorage","getItem","token","setToken","user","setUser","isLog","setIsLog","setIsStaff","polling","setPolling","useEffect","undefined","refreshToken","old","fetch","method","headers","body","JSON","stringify","then","r","ok","json","Error","data","console","log","handleTokenData","error","is_staff","setItem","Provider","value","loginHandler","username","password","logoutHandler","removeItem","children","LoginLink","className","href","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","jQuery","trim","substring","decodeURIComponent","Room","useContext","room","current_users","code","class","nombre","map","to","RoomForm","setNombre","type","onChange","e","target","onClick","response","RoomList","setRoom","getRoom","Grid","Box","component","overflow","maxHeight","item","AlwaysScrollToBottom","elementRef","useRef","current","scrollIntoView","ref","api","ws_scheme","room_code","useParams","messages","setMessages","users","setUsers","messageText","setMessageText","WebSocket","ws","setWs","submitMessage","send","action","message","request_id","onmessage","parse","usuarios","oldMessages","onopen","pk","onclose","setTimeout","aria-label","aria-current","onKeyDown","keyCode","rows","placeholder","style","msj","Typography","created_at_formatted","text","NotaPage","titulo","setTitulo","subtitulo","setSubtitulo","cuerpo","setCuerpo","htmlFor","ele","getEditor","makeUnprivilegedEditor","theme","editorChange","formats","modules","toolbar","Authorization","autor","username_id","Comentario","comentario","Card","CardHeader","title","subheader","created_at","CardContent","variant","CommentForm","FormControl","fullWidth","Input","required","margin","Button","nota","slug","setComments","comments","color","Nota","params","setNota","getNota","oldNota","oldComments","comentarios","Paper","elevation","Divider","id","NotaList","notas","setNotas","getNotas","container","justify","alignItems","spacing","direction","xs","md","xl","display","paragraph","replace","node","tagName","CardActions","disableSpacing","IconButton","Nav","useLocation","data-toggle","data-target","LoginForm","history","useHistory","setUsername","setPassword","height","onSubmit","push","FormLabel","autoComplete","RegisterForm","errors","setErrors","resStatus","preventDefault","status","detail","HomePage","exact","path","render","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","App","loggedIn","setLoggedIn","handle_login","res","goBack","handle_logout","appDiv","getElementById"],"mappings":"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","file":"static/js/main.0a3d187d.chunk.js","sourcesContent":["const host = window.location.protocol === \"https:\"?window.location.host:\"localhost:8000\";//\"localhost:8000\"//window.location.host; // todo chequear \r\nconst ws_scheme = window.location.protocol === \"https:\"?\"wss\":\"ws\";\r\nconst protocol = window.location.protocol;\r\nconst api = `${protocol}//${host}`;","import React, { createContext, useState, useEffect } from \"react\";\r\n\r\n\r\nconst UserContext = createContext();\r\n\r\n\r\nexport const UserProvider = (props) => {\r\n    const [token, setToken] = useState(() => localStorage.getItem(\"token\"));\r\n    const [user, setUser] = useState();\r\n    const [isLog, setIsLog] = useState(false);\r\n    const [isStaff, setIsStaff] = useState(false)\r\n    const [polling, setPolling] = useState(false);\r\n\r\n    useEffect(() => (token != null || token != undefined) ? refreshToken() : null, []); // ? Reload user data if has token\r\n\r\n    const refreshToken = () => {\r\n        setPolling(old => true);\r\n        fetch(`/api/token-auth/refresh/`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ token: token })\r\n        }).then(r => {\r\n            if (r.ok) return r.json();\r\n            throw new Error(\"Token expired\")\r\n        }).then(data => {\r\n            console.log(\"Refresh token\", data);\r\n            handleTokenData(data);\r\n            setPolling(old => false);\r\n\r\n        }, error => { console.log(\"Error\", error); })\r\n    };\r\n\r\n    const loginHandler = (username, password) => {\r\n        setPolling(old => true);\r\n        fetch(`/api/token-auth/`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                username: username,\r\n                password: password,\r\n            })\r\n        }).then(r => r.json()).then(data => {\r\n            console.log(\"Login handler\", data);\r\n            handleTokenData(data)\r\n            setPolling(old => false);\r\n        });\r\n    };\r\n    const logoutHandler = () => {\r\n        setUser(old => null);\r\n        setIsLog(old => false);\r\n        setToken(old => null)\r\n        setIsStaff(old => false)\r\n        localStorage.removeItem(\"token\");\r\n    }\r\n\r\n    const handleTokenData = (data) => {\r\n        setToken(old => data.token);\r\n        setUser(old => data.user);\r\n        setIsLog(old => true);\r\n        setIsStaff(old => data.user.is_staff);\r\n        localStorage.setItem(\"token\", data.token);\r\n    };\r\n\r\n    return (\r\n        <UserContext.Provider value={{ user, loginHandler, logoutHandler, isLog, token, polling, handleTokenData }}>\r\n            {props.children}\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default UserContext;","import React from \"react\";\r\nimport {Link} from \"@material-ui/core\";\r\n\r\nexport const LoginLink = () => {\r\n    return (\r\n        <div className=\"jumbotron text-center jumbotron-fluid\">\r\n            <div className=\"display-2\">\r\n                Para acceder a esta seccion debe registrarse o loguearse\r\n\t\t\t</div>\r\n            <a href=\"/frontend/login/\" className=\"btn btn-lg btn-dark ml-3\">Login</a>\r\n            <a href=\"/frontend/register/\" className=\"btn btn-lg btn-dark ml-3\">Registrarse</a>\r\n        </div>\r\n    );\r\n}","import jQuery from 'jquery'; \r\n\r\nexport const getCookie = (name) => {\r\n    var cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        var cookies = document.cookie.split(';');\r\n        for (var i = 0; i < cookies.length; i++) {\r\n            var cookie = jQuery.trim(cookies[i]);\r\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}","import React, { Component, useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n} from \"react-router-dom\";\r\nimport UserContext from \"../contexts/UserContext\";\r\nimport { LoginLink } from \"./singleComponents/LoginLink\";\r\nimport { getCookie } from \"./utils/GetCookie\";\r\n\r\nconst Room = (props) => {\r\n\tconst {isLog} = useContext(UserContext);\r\n\tconst room = props.room;\r\n\tconst host = room.host;\r\n\tconst current_users = room.current_users;\r\n\tconst code = room.code;\r\n\treturn (\r\n\t\t<div className=\"card m-1 p-1 mb-3\">\r\n\t\t\t<div className=\"card-header\">\r\n\t\t\t\t{host.username}'s room\r\n\t\t</div>\r\n\t\t\t<div className=\"card-body\">\r\n\t\t\t\t<ul class=\"list-group list-group-flush\">\r\n\t\t\t\t\t<li class=\"list-group-item\">\r\n\t\t\t\t\t\tRoom \"{room.nombre}\"\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{current_users?.map(user => (\r\n\t\t\t\t\t\t<li class=\"list-group-item\">\r\n\t\t\t\t\t\t\t{user.username}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t{isLog && <Link className=\"btn btn-dark mt-3\" to={`/frontend/rooms/${code}`}>Ingresar</Link>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t);\r\n};\r\n\r\nconst RoomForm = (props) => {\r\n\tconst [nombre, setNombre] = useState(\"\")\r\n\tconst submitHandler = () => {\r\n\t\tfetch(`/api/rooms/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: { 'Accept': 'application/json', 'Content-Type': 'application/json', 'X-CSRFToken': getCookie(\"csrftoken\"),},//'X-CSRFToken': $(token).val(), },\r\n\t\t\tbody: JSON.stringify({ nombre: nombre })\r\n\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => { console.log(data); props.onChange(data); }, (error) => null);\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"jumbotron text-center jumbotron-fluid\">\r\n\t\t\t<div className=\"display-2\">\r\n\t\t\t\tCree un nuevo room\r\n\t\t\t</div>\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\tNombre: \r\n\t\t\t\t<input type=\"text\" className=\"form-control\" onChange={(e) => setNombre(e.target.value)} value={nombre} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button onClick={submitHandler} className=\"m-3 btn btn-lg btn-dark\">Crear</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"display-4 text-muted\">O ingrese a uno ya creado</div>\r\n\r\n\t\t</div>\r\n\t);\r\n};\r\nexport function RoomList() {\r\n\tconst {isLog, polling} = useContext(UserContext);\r\n\tconst [room, setRoom] = useState(null);\r\n\tconst [nombre, setNombre] = useState(null);\r\n\tconst [roomCreado, setRoomCreado] = useState(null);\r\n\tuseEffect(() => getRoom(), []);\r\n\r\n\tconst getRoom = () => fetch(`/api/rooms/`).then((r) => r.json()).then(data => setRoom(room => data));\r\n\tif (room == null) return (\r\n\t\t<div>Cargando...</div>\r\n\t);\r\n\tconst newRoom = (data) => { setRoom((room => [data, ...room])) };\r\n\r\n\t// console.log(isLog, polling);\r\n\t// if (!isLog && !polling) {\r\n\t// \treturn (<Redirect to=\"/frontend/login/\"/>)\r\n\t// }\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t{isLog?<RoomForm onChange={newRoom} />:(\r\n\t\t\t\t<LoginLink/>\r\n\t\t\t)}\r\n\t\t\t\r\n\t\t\t<Box component=\"div\" overflow=\"auto\" maxHeight=\"50vh\">\r\n\t\t\t{\r\n\t\t\t\troom?.map((item) => (\r\n\t\t\t\t\t<Room room={item} />\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n}\r\nexport default RoomList;","import React, { useEffect, useRef } from \"react\";\r\n\r\nexport function AlwaysScrollToBottom() {\r\n\tconst elementRef = useRef();\r\n\tuseEffect(() => elementRef.current.scrollIntoView());\r\n\treturn <div ref={elementRef} />;\r\n}\r\n","import React, { Component, useEffect, useRef, useState } from \"react\";\r\nimport { GridList, GridListTile, List, ListItem, Paper, Card, CardContent, \r\n\tGrid, Button, ButtonGroup, Typography, TextField, FormControl } from \"@material-ui/core\";\r\nimport {BrowserRouter as Router,Switch,Route,Link,Redirect,useParams,\r\n} from \"react-router-dom\";\r\nimport Chat from './Chat.js';\r\nimport ChatUsers from './ChatUsers.js';\r\nimport { AlwaysScrollToBottom } from \"./utils/AlwaysScrollToBottom\";\r\nimport { getCookie } from \"./utils/GetCookie\";\r\nimport {host, protocol, ws_scheme, api} from \"../globals\";\r\n\r\nexport function Room() {\r\n    const api = `${window.location.protocol}//${window.location.protocol === \"https:\"?window.location.host:\"localhost:8000\"}`;\r\n\tconst ws_scheme = window.location.protocol === \"https:\"?\"wss\":\"ws\";\r\n\tconst host = window.location.protocol === \"https:\"?window.location.host:\"localhost:8000\";//\"localhost:8000\"//window.location.host; // todo chequear \r\n\tlet params = useParams(); // params.room\r\n\tconst room_code = params.room;\r\n\tconst [room, setRoom] = useState(null);\r\n\tconst [messages, setMessages] = useState();\r\n\tconst [users, setUsers] = useState(null);\r\n\tconst [messageText, setMessageText] = useState(null);\r\n\tconst [ws, setWs] = useState(()=> new WebSocket(`${ws_scheme}://${host}/ws/messages/`))\r\n\tconst updateMessageText = (e)=>setMessageText(e.target.value)\r\n\r\n\tconst getRoom = () => fetch(`${api}/api/rooms/?code=${room_code}`)\r\n\t.then((data) => data.json()).then(data=>{\r\n\t\tsetRoom(data[0]);\r\n\t\tsetMessages(data[0].messages);\r\n\t});\r\n\t\r\n\tuseEffect(() => getRoom(), []);\r\n\r\n\r\n\tconst enterPress = (e) => e.keyCode === 13?submitMessage():null;\r\n\r\n\tconst submitMessage = ()=>{\r\n\t\tconsole.log(messageText)\r\n\t\tif (messageText != null){\r\n\t\t\tws.send(JSON.stringify({\r\n\t\t\t\taction:\"create_message\",\r\n\t\t\t\tmessage:messageText,\r\n\t\t\t\trequest_id:getCookie(\"csrftoken\"),\r\n\t\t\t}));\r\n\t\t}\r\n\t\tsetMessageText(\"\");\r\n\t};\r\n\r\n\tws.onmessage = function (e) {\r\n\t\tconst data = JSON.parse(e.data);\r\n\t\tconsole.log(data);\r\n\t\tif (\"data\" in data && data.data != null){\r\n\t\t\tsetUsers(data.data.current_users);\r\n\t\t}\r\n\t\tif (\"usuarios\" in data && data.usuarios != null){\r\n\t\t\tsetUsers(data.usuarios);\r\n\t\t}\r\n\t\tif (data.action === \"create\" && data.type===\"message.activity\"){\r\n\t\t\tsetMessages(oldMessages=>[...oldMessages, data]);\r\n\t\t}\r\n\t}\r\n\tws.onopen = function () {\r\n\t\tif (room != null){\r\n\t\t\tws.send(JSON.stringify({\r\n\t\t\t\tpk: room.pk,\r\n\t\t\t\taction: \"join_room\",\r\n\t\t\t\trequest_id: getCookie(\"csrftoken\"),\r\n\t\t\t}));\r\n\t\t\tws.send(JSON.stringify({\r\n\t\t\t\taction: \"subscribe_instance\",\r\n\t\t\t\tpk: room.pk,\r\n\t\t\t\trequest_id: getCookie(\"csrftoken\"),\r\n\t\t\t}));\r\n\t\t\tws.send(JSON.stringify({\r\n\t\t\t\taction: \"subscribe_to_messages_in_room\",\r\n\t\t\t\tpk: room.pk,\r\n\t\t\t\trequest_id: getCookie(\"csrftoken\"),\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\tws.onclose = function (e) {\r\n\t\tconsole.error('Chat socket closed unexpectedly');\r\n\t\tsetTimeout(() =>setWs(new WebSocket(`${ws_scheme}://${host}/ws/messages/`)), 1000 * 10);\r\n\t};\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<nav aria-label=\"breadcrumb\">\r\n\t\t\t\t<ol class=\"breadcrumb\">\r\n\t\t\t\t\t<li class=\"breadcrumb-item\"><Link to={`/frontend/rooms/`}>Rooms</Link></li>\r\n\t\t\t\t\t<li class=\"breadcrumb-item active\" aria-current=\"page\">{room?.nombre}</li>\r\n\t\t\t\t</ol>\r\n\t\t\t</nav>\r\n\t\t<div className=\"container\">\r\n\t\t\t<h3 className=\"text-capitalize\">\r\n\t\t\t\tRoom {room?.nombre}, <small className=\"text-muted\">{room?.host.username} is the host</small>\r\n\t\t\t</h3>\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col-xl-2 col-md-12 col-sm-12\">\r\n\t\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t\t<div className=\"col-12 mb-2\">\r\n\t\t\t\t\t\t\t<ul class=\"list-group\">\r\n\t\t\t\t\t\t\t\t{users?.map(user=>(\r\n\t\t\t\t\t\t\t\t\t<li class=\"list-group-item\">{user.username}</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-12 mb-2\">\r\n\t\t\t\t\t\t\t\t<textarea onKeyDown={enterPress} onChange={(e)=>setMessageText(e.target.value)} value={messageText} className=\"form-control\" rows=\"3\" placeholder=\"Mensaje\"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-12 mb-2\">\r\n\t\t\t\t\t\t\t\t<button onClick={submitMessage} className=\"btn btn-lg btn-dark\">Enviar</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t<div className=\"card m-2 p-5 \" style={{maxHeight: \"80vh\", overflow: 'auto'}}>\r\n\t\t\t\t\t\t{messages?.map(msj=>(\r\n\t\t\t\t\t\t\t<div className=\"card mb-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t{msj.created_at_formatted} {msj.user?.username}: {msj.text}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t<AlwaysScrollToBottom/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\nexport default Room;","import React, { Component, useEffect, useRef, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n    GridList, GridListTile, List, ListItem, Paper, Card, CardContent,\r\n    Grid, Button, ButtonGroup, Typography, TextField, FormControl, useScrollTrigger\r\n} from \"@material-ui/core\";\r\nimport {\r\n    BrowserRouter as Router, Switch, Route, Link, Redirect, useParams,\r\n} from \"react-router-dom\";\r\nimport { AlwaysScrollToBottom } from \"./utils/AlwaysScrollToBottom\";\r\nimport { getCookie } from \"./utils/GetCookie\";\r\n\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nexport function NotaPage() {\r\n    const api = `${window.location.protocol}//${window.location.protocol === \"https:\"?window.location.host:\"localhost:8000\"}`;\r\n    console.log(api)\r\n    let params = useParams();\r\n    var editor = useRef(null);\r\n    var editorRef = useRef(null);\r\n    const formats = [\r\n        'header',\r\n        'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n        'list', 'bullet', 'indent',\r\n        'link', 'image'\r\n    ];\r\n    const modules = {\r\n        toolbar: [\r\n          [{ 'header': [1, 2, false] }],\r\n          ['bold', 'italic', 'underline','strike', 'blockquote'],\r\n          [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}],\r\n          ['link', 'image'],\r\n          ['clean']\r\n        ],\r\n    };\r\n    const scrollingContainer = {}\r\n    const [titulo, setTitulo] = useState(null)\r\n    const [subtitulo, setSubtitulo] = useState(null)\r\n    const [cuerpo, setCuerpo] = useState('');\r\n    const editorChange = (e)=>setCuerpo(e);\r\n    const uploadNota = ()=>fetch(`${api}/api/nota/`, {\r\n        method:\"POST\",\r\n        headers: { \r\n            'Accept': 'application/json', \r\n            'Content-Type': 'application/json', \r\n            Authorization: `JWT ${localStorage.getItem(\"token\")}`, \r\n            'X-CSRFToken': getCookie(\"csrftoken\"),},// 'X-CSRFToken': $(token).val(), },\r\n        body:JSON.stringify({\r\n            titulo:titulo,\r\n            subtitulo:subtitulo,\r\n            cuerpo:cuerpo,\r\n            autor:window.username_id,\r\n        }),\r\n    }).then(r=>r.json()).then(data=>console.log(data));\r\n    return (\r\n        <div>\r\n\t\t\t<nav aria-label=\"breadcrumb\">\r\n\t\t\t\t<ol class=\"breadcrumb\">\r\n\t\t\t\t\t<li class=\"breadcrumb-item\"><Link to={`/frontend/notas/`}>Notas</Link></li>\r\n\t\t\t\t\t<li class=\"breadcrumb-item active\" aria-current=\"page\">Nueva nota</li>\r\n\t\t\t\t</ol>\r\n\t\t\t</nav>\r\n            <div className=\"container\">\r\n                <h2>Crear una nueva nota</h2>\r\n                <div className=\"row mb-3\">\r\n                    <div className=\"col\">\r\n                        <label htmlFor=\"\">\r\n                            Titulo\r\n                        </label>\r\n                            <input type=\"text\" value={titulo} onChange={(e)=>setTitulo(e.target.value)} className=\"form-control form-control-lg\"/>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label htmlFor=\"\">\r\n                            Subtitulo\r\n                        </label>\r\n                            <input type=\"text\" value={subtitulo} onChange={(e)=>setSubtitulo(e.target.value)} className=\"form-control form-control-sm\"/>\r\n                    </div>\r\n                </div>\r\n                <ReactQuill \r\n                    ref={(ele)=>{if(ele){editor=ele.getEditor(); editorRef=ele.makeUnprivilegedEditor(ele.getEditor())}}} \r\n                    theme=\"snow\" value={cuerpo} onChange={(e) => editorChange(e)} formats={formats} modules={modules} \r\n                />\r\n                <div className=\"form-group mt-3\">\r\n                    <button onClick={uploadNota} className=\"btn btn-lg btn-dark\">Guardar</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default NotaPage;","import React, { Component, useState, useEffect } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box, Card, CardContent, CardMedia, CardActionArea, CardActions, IconButton, CardHeader, Paper, InputLabel, FormControl, Input } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseParams,\r\n} from \"react-router-dom\";\r\nimport parse from 'html-react-parser';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\n\r\n\r\n\r\nexport function  Comentario({comentario}) {\r\n    const autor = comentario.autor;\r\n\treturn (\r\n\t\t<Card>\r\n            <CardHeader title={autor.username} subheader={comentario.created_at}/>\r\n            <CardContent>\r\n                <Typography variant=\"body1\">\r\n                    {comentario.cuerpo}\r\n                </Typography>\r\n            </CardContent>\r\n\t\t</Card>\r\n\t);\r\n}\r\n\r\nexport default Comentario;","import React, { Component, useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box, Card, CardContent, CardMedia, CardActionArea, CardActions, IconButton, CardHeader, Paper, Divider, FormControl, Input } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseParams,\r\n} from \"react-router-dom\";\r\nimport Comentario from \"./Comentario\";\r\nimport parse from 'html-react-parser';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport UserContext from \"../contexts/UserContext\";\r\n\r\n\r\nconst CommentForm = (props)=>{\r\n\tconst [cuerpo, setCuerpo] = useState(null);\r\n\tconst postComment = ()=>fetch(`/api/comentario/`, {\r\n\t\tmethod:\"POST\",\r\n\t\theaders: { \r\n\t\t\t// 'Accept': 'application/json', \r\n\t\t\t'Content-Type': 'application/json', \r\n\t\t\t// 'X-CSRFToken': $(token).val(), \r\n\t\t\tAuthorization: `JWT ${localStorage.getItem(\"token\")}`\r\n\t\t},\r\n\t\tbody:JSON.stringify({\r\n\t\t\tcuerpo:cuerpo,\r\n\t\t\tnota:props.slug,\r\n\t\t\t// autor:window.username_id,\r\n\t\t})\r\n\t}).then(r=>r.json()).then(data=>props.setComments(comments=>[...comments, data])).then(setCuerpo(old=>\"\"));\r\n\t\treturn (\r\n        <FormControl fullWidth={true}>\r\n            <Input required={true} onChange={(e)=>setCuerpo(e.target.value)} value={cuerpo} placeholder=\"Comentario\" fullWidth={true} margin=\"dense\" className=\"mb-2 mt-3\"></Input>\r\n            <Button onClick={postComment} color=\"secondary\" variant=\"contained\">Comentar</Button>\r\n        </FormControl>\r\n    );\r\n}\r\n\r\nexport function  Nota() {\r\n\tconst {user, isLog} = useContext(UserContext)\r\n\tconst params = useParams();\r\n\tconst slug = params.slug;\r\n\tconst [nota, setNota] = useState(null);\r\n\tconst [comments, setComments] = useState(null)\r\n\tuseEffect(()=>getNota(), []);\r\n\tconst getNota = ()=>fetch(`/api/nota/${slug}/`).then(r=>r.json()).then(data=>{\r\n\t\tsetNota(oldNota=>data);\r\n\t\tsetComments(oldComments=>data.comentarios);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<nav aria-label=\"breadcrumb\">\r\n\t\t\t\t<ol class=\"breadcrumb\">\r\n\t\t\t\t\t<li class=\"breadcrumb-item\"><Link to={`/frontend/notas/`}>Notas</Link></li>\r\n\t\t\t\t\t<li class=\"breadcrumb-item active\" aria-current=\"page\">{params.slug}</li>\r\n\t\t\t\t</ol>\r\n\t\t\t</nav>\r\n\t\t\t<div className=\"container mt-2\">\r\n\t\t\t\t<Paper elevation={3} className=\"p-5 mb-5\">\r\n\t\t\t\t\t<Typography variant=\"h2\">{nota?.titulo}</Typography>\r\n\t\t\t\t\t<Typography variant=\"h4\">{nota?.subtitulo}</Typography>\r\n\t\t\t\t\t<Typography variant=\"subtitle2\" className=\"text-muted\">{nota?.created_at}</Typography>\r\n\t\t\t\t\t<Typography variant=\"body1\" >{nota && parse(nota.cuerpo)}</Typography>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Divider/>\r\n\t\t\t\t<Typography variant=\"h4\" className=\"mt-2 mb-2\">Comentarios</Typography>\r\n\t\t\t\t{comments && comments.map(comentario=>(\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Comentario key={comentario.id} comentario={comentario} />\r\n\t\t\t\t\t\t<Divider className=\"m-2\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{isLog && <CommentForm setComments={setComments} slug={slug}/>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\nexport default Nota;","import React, { Component, useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box, Card, CardContent, CardMedia, CardActionArea, CardActions, IconButton, CardHeader } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n} from \"react-router-dom\";\r\nimport parse from 'html-react-parser';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport UserContext from \"../contexts/UserContext\";\r\nimport { LoginLink } from \"./singleComponents/LoginLink\";\r\n\r\nexport function NotaList() {\r\n\tconst {isLog, polling} = useContext(UserContext);\r\n\tconst [notas, setNotas] = useState(null);\r\n\tuseEffect(()=>getNotas(), []); // ! la lista vacia hace que solo se ejecute en el inicio\r\n\tconst getNotas = ()=>fetch(`/api/nota/`).then(r=>r.json()).then(data=>setNotas(data));\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className=\"container-fluid\">\r\n\t\t\t{isLog?\r\n\t\t\t<div className=\"jumbotron jumbotron-fluid\">\r\n\t\t\t\t<Grid container justify=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h2\">\r\n\t\t\t\t\t\tCree una nueva nota <Link to=\"/frontend/crear/nota/\">aqui</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t\t:\r\n\t\t\t<LoginLink></LoginLink>\r\n\t\t\t}\r\n\t\t\t<div className=\"container mt-2\">\r\n\t\t\t\t<Grid container spacing={2} direction=\"row\">\r\n\t\t\t\t\t\t{notas?.map(nota=>(\r\n\t\t\t\t\t\t<Grid key={nota.id} item xs={12} md={4} xl={3} >\r\n\t\t\t\t\t\t\t<Box component=\"span\" display=\"block\">\r\n\t\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t\t<CardHeader title={nota.titulo} subheader={nota.created_at}  />\r\n\t\t\t\t\t\t\t\t\t{/* <CardActionArea> */}\r\n\t\t\t\t\t\t\t\t\t\t<CardContent className=\"text-truncate\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{parse(nota.cuerpo, {replace: node=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (node.tagName === \"img\") return <span></span> //? Reemplaza las imagenes\r\n\t\t\t\t\t\t\t\t\t\t\t\t}})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t\t\t\t\t\t<CardActions disableSpacing>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to={`/frontend/nota/${nota.slug}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<KeyboardArrowRightIcon/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t</CardActions>\r\n\t\t\t\t\t\t\t\t\t{/* </CardActionArea> */}\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\nexport default NotaList;","import React, { Component, useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box, Card, CardContent, CardMedia, CardActionArea, CardActions, IconButton, CardHeader, Paper, Divider, FormControl, Input } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseParams,\r\n\tuseHistory,\r\n\tuseLocation,\r\n} from \"react-router-dom\";\r\nimport Comentario from \"./Comentario\";\r\nimport parse from 'html-react-parser';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport UserContext from \"../contexts/UserContext\";\r\n\r\nexport function Nav(props) {\r\n\tlet location = useLocation();\r\n\tconst { user, isLog, logoutHandler } = useContext(UserContext);\r\n\t// return (\r\n\t// \t<ul>\r\n\t// \t\t<li>\r\n\t// \t\t\tToken: {user?.token}\r\n\t// \t\t</li>\r\n\t// \t\t<li>\r\n\t// \t\t\tIsLoged: {isLog ? \"Si\" : \"No\"}\r\n\t// \t\t</li>\r\n\t// \t\t<li>\r\n\t// \t\t\t<button onClick={logoutHandler}>Logout</button>\r\n\t// \t\t</li>\r\n\t// \t\t<li>\r\n\t// \t\t\t<Link to=\"/frontend/login/\">Login</Link>\r\n\t// \t\t</li>\r\n\t// \t</ul>\r\n\t// );\r\n\treturn \t(\r\n\t<nav className=\"navbar navbar-expand-lg sticky-top navbar-dark bg-dark\">\r\n            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\".dual-collapse2\">\r\n                <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <a className=\"navbar-brand ml-2\" href=\"/frontend/notas/\">\r\n                LOGO\r\n            </a>\r\n            <div className=\"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2\">\r\n                <ul className=\"navbar-nav mr-auto\">\r\n                    <li className=\"nav-item\">\r\n                        <a className=\"nav-link\" href=\"/frontend/notas/\">\r\n                            Notas\r\n                        </a>\r\n                    </li>\r\n\t\t\t\t\t{isLog && (\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<a className=\"nav-link\" href=\"/frontend/crear/nota/\">\r\n\t\t\t\t\t\t\t\tCrear nota\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t)}\r\n                    <li className=\"nav-item\">\r\n                        <a className=\"nav-link\" href=\"/frontend/rooms/\">\r\n                            Chat Rooms\r\n                        </a>\r\n                    </li >\r\n                </ul >\r\n            </div >\r\n            <div className=\"mx-auto order-0\">\r\n                <a className=\"navbar-brand mx-auto\">\r\n\t\t\t\t\tTitle\r\n                </a>\r\n            </div>\r\n            <div className=\"navbar-collapse collapse w-100 order-3 dual-collapse2\">\r\n                <ul className=\"navbar-nav ml-auto\">\r\n                    {isLog ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<a className=\"flex-sm-fill text-sm-center nav-link disabled\" href=\"#\">\r\n\t\t\t\t\t\t\t\t{user?.username}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<a className=\"flex-sm-fill text-sm-center nav-link\" onClick={logoutHandler}>\r\n\t\t\t\t\t\t\tCerrar sesion\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t):(\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<a className=\"flex-sm-fill text-sm-center nav-link\" href=\"/frontend/login/\">\r\n\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<a className=\"flex-sm-fill text-sm-center nav-link\" href=\"/frontend/register/\">\r\n\t\t\t\t\t\t\tRegistrarse\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n                </ul>\r\n            </div>\r\n\t\t</nav>\r\n\t\t);\r\n}\r\nexport default Nav;\r\n","import React, { Component, useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box, Card, CardContent, CardMedia, CardActionArea, CardActions, IconButton, CardHeader, Paper, Divider, FormLabel, FormControl, Input } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseParams,\r\n    useHistory,\r\n    useLocation,\r\n} from \"react-router-dom\";\r\nimport Comentario from \"./Comentario\";\r\nimport parse from 'html-react-parser';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport UserContext from \"../contexts/UserContext\";\r\n \r\nexport function  LoginForm(props) {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const {loginHandler} = useContext(UserContext);\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    \r\n    return (\r\n        <Grid container alignItems=\"center\" justify=\"center\" style={{height:\"100vh\"}}>\r\n            <form onSubmit={e=>{\r\n                loginHandler(username, password);\r\n                history.push(\"/frontend/notas/\");\r\n                }}>\r\n                <FormControl>\r\n                    <Typography variant=\"h3\">Log In</Typography>\r\n                    <FormLabel>\r\n                        <Input autoComplete=\"username\" type=\"text\" placeholder=\"Usuario\" value={username} onChange={e=>setUsername(old=>e.target.value)} />\r\n                    </FormLabel>\r\n                    <FormLabel>\r\n                        <Input autoComplete=\"password\" type=\"password\" placeholder=\"Contraseña\" value={password} onChange={e=>setPassword(old=>e.target.value)} />\r\n                    </FormLabel>\r\n                    <input type=\"submit\" className=\"btn btn-lg btn-dark\" />\r\n                </FormControl>\r\n            </form>\r\n        </Grid>\r\n      );\r\n  \r\n}\r\nexport default LoginForm;\r\n","import React, { Component, useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography, Box, Card, CardContent, CardMedia, CardActionArea, CardActions, IconButton, CardHeader, Paper, Divider, FormLabel, FormControl, Input, } from \"@material-ui/core\";\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    Redirect,\r\n    useParams,\r\n    useHistory,\r\n    useLocation,\r\n} from \"react-router-dom\";\r\nimport Comentario from \"./Comentario\";\r\nimport parse from 'html-react-parser';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport UserContext from \"../contexts/UserContext\";\r\nimport { getCookie } from \"./utils/GetCookie\";\r\n\r\nexport function RegisterForm(props) {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const { handleTokenData } = useContext(UserContext);\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [errors, setErrors] = useState([])\r\n\r\n\r\n    let resStatus = 0\r\n    const submitHandler = (e) => {\r\n        e.preventDefault()\r\n        fetch(`/api/users/`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\", 'X-CSRFToken': getCookie(\"csrftoken\")},\r\n            body: JSON.stringify({\r\n                username: username,\r\n                password: password,\r\n            })\r\n        }).then(r => { resStatus = r.status; return r.json() })\r\n            .then(\r\n                data => {\r\n                    console.log(data);\r\n                    switch (resStatus) {\r\n                        case 201:\r\n                            handleTokenData({user:data, token:data.token});\r\n                            setUsername(old=>\"\");\r\n                            setPassword(old=>\"\");\r\n                            setErrors(old=>[]);\r\n                            history.push(\"/frontend/notas/\");\r\n                            break;\r\n                        default:\r\n                            console.log(\"Else\", data);\r\n                            setErrors(old=>[...old, data.detail]);\r\n                            break;\r\n                    }\r\n                })\r\n    }\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\" justify=\"center\" style={{ height: \"100vh\" }}>\r\n            <form onSubmit={submitHandler}>\r\n                <FormControl>\r\n                    <Typography variant=\"h3\">Registrarse</Typography>\r\n                    {errors && errors.map(error => (<ul>\r\n                        <li>\r\n                            <Typography variant=\"p\">\r\n                                {error}\r\n                            </Typography>\r\n                        </li>\r\n                    </ul>))}\r\n                    <FormLabel>\r\n                        <Input required={true} autoComplete=\"\" type=\"text\" placeholder=\"Usuario\" value={username} onChange={e => setUsername(old => e.target.value)} />\r\n                    </FormLabel>\r\n                    <FormLabel>\r\n                        <Input required={true} autoComplete=\"\" type=\"password\" placeholder=\"Contraseña\" value={password} onChange={e => setPassword(old => e.target.value)} />\r\n                    </FormLabel>\r\n                    <input type=\"submit\" className=\"btn btn-lg btn-dark\" />\r\n                </FormControl>\r\n            </form>\r\n        </Grid>\r\n    );\r\n}\r\n","import React, { Component, useState, useEffect } from \"react\";\r\nimport { Grid, Button, ButtonGroup, Typography } from \"@material-ui/core\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n} from \"react-router-dom\";\r\nimport RoomList from \"./RoomList\";\r\nimport Room from \"./Room\";\r\nimport NotaPage from \"./NotaPage\";\r\nimport Nota from \"./Nota\";\r\nimport NotaList from \"./NotaList\";\r\nimport Nav from \"./Nav\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport  {UserProvider}  from \"../contexts/UserContext\";\r\nimport { RegisterForm } from \"./RegisterForm\";\r\n// import { CounterProvider } from \"../contexts/CounterContext\";\r\n\r\nexport default function HomePage(props) {\r\n\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<UserProvider>\r\n\t\t\t\t<Nav />\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath=\"/frontend/\"\r\n\t\t\t\t\t\trender={() => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<p>Home page</p>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route exact path=\"/frontend/rooms/\">\r\n\r\n\t\t\t\t\t\t<RoomList />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/frontend/rooms/:room/\">\r\n\t\t\t\t\t\t<Room></Room>\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/frontend/notas/\" component={NotaList} />\r\n\t\t\t\t\t<Route exact path=\"/frontend/crear/nota/\" component={NotaPage} />\r\n\t\t\t\t\t<Route exact path=\"/frontend/nota/:slug/\">\r\n\t\t\t\t\t\t{/* <CounterProvider> */}\r\n\t\t\t\t\t\t<Nota></Nota>\r\n\t\t\t\t\t\t{/* </CounterProvider> */}\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/frontend/login/\" >\r\n\t\t\t\t\t\t<LoginForm />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/frontend/register/\" >\r\n\t\t\t\t\t\t<RegisterForm />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</UserProvider>\r\n\t\t</Router>\r\n\t);\r\n\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React, { Component, useState, useEffect } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseParams,\r\n\tuseHistory,\r\n\tuseLocation,\r\n} from \"react-router-dom\";\r\nimport HomePage from \"./HomePage\";\r\nimport RoomList from \"./RoomList\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport Nav from \"./Nav\";\r\nimport reportWebVitals from '../reportWebVitals';\r\n\r\nexport default function App() {\r\n\tconst [loggedIn, setLoggedIn] = useState(() => localStorage.getItem(\"token\") ? true : false)\r\n\tconst [username, setUsername] = useState(\"\");\r\n\r\n\tconst handle_login = (e, username, password, location, history) => {\r\n\t\te.preventDefault();\r\n\t\tfetch('/api/token-auth/', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ username: username, password: password })\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.ok) throw res;\r\n\t\t\t\treturn res.json();\r\n\t\t\t}).then(\r\n\t\t\t\tjson => {\r\n\t\t\t\t\tlocalStorage.setItem('token', json.token);\r\n\t\t\t\t\tsetLoggedIn(old => true);\r\n\t\t\t\t\tsetUsername(old => json.user.username);\r\n\t\t\t\t\thistory.goBack()\r\n\t\t\t\t});\r\n\t};\r\n\tconst handle_logout = () => {\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\tsetLoggedIn(old => false);\r\n\t\tsetUsername(old => \"\");\r\n\r\n\t}\r\n\r\n\t// if (!loggedIn)\r\n\t//   return <LoginForm handle_login={handle_login}></LoginForm>;\r\n\r\n\treturn (\r\n\t\t<HomePage loggedIn={loggedIn} setLoggedIn={setLoggedIn} setUsername={setUsername} handle_login={handle_login} handle_logout={handle_logout} />\r\n\t);\r\n}\r\n\r\nconst appDiv = document.getElementById(\"root\");\r\nrender(<App />, appDiv);\r\nreportWebVitals();\r\n"],"sourceRoot":""}